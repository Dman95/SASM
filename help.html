<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<meta content="text/html; charset=utf-8" http-equiv="content-type">
	<TITLE>Справка SASM</TITLE>
</HEAD>
<BODY>
<H1>Краткая справка.</H1>
<P>
SASM (SimpleASM) - простая среда разработки на языке ассемблера NASM с подсветкой синтаксиса и отладчиком.
</P>
<P>
В SASM Вы можете легко разрабатывать и выполнять программы, написанные на языке ассемблера NASM. Вводите код в форму и запускайте приложение. 
В Windows также возможен запуск приложения в отдельном окне. Входные данные указывайте в поле &quot;Ввод&quot;. В поле &quot;Вывод&quot; Вы сможете
увидеть результат работы программы. При этом все сообщения и ошибки компиляции будут выводиться в форму снизу. Вы можете
сохранять исходный или скомпилированный (exe) код программы в файл, а также загружать свои программы из файла. 
Если Вы хотите прервать выполнение программы (например,
при зацикливании), нажмите кнопку &quot;Остановить&quot;. 
</P>
<P>
Программа поддерживает работу с несколькими проектами – новые файлы открываются и создаются в новых
вкладках. При выходе из программы текущий набор открытых файлов сохраняется. При следующем запуске Вы сможете восстановить
предыдущую сессию, нажав на кнопку &quot;Продолжить предыдущую сессию&quot; на стартовом окне. В параметрах можно
выбрать автоматическое продолжение предыдущей сессии. Также в параметрах настраивается шрифт, положение поля &quot;Код&quot; и текст, 
отображающийся при создании нового файла. Интерфейс программы доступен на двух языках (русский и английский).
</P>
<P>
Стандартное меню &quot;Правка&quot; дополнено возможностью комментирования/раскомментирования выделенного куска кода и 
создания/удаления отступа в 4 пробела (Tab/Ctrl+Tab).
</P>
<P>
В SASM включена библиотека макросов &quot;io.inc&quot;.
В ней есть кроссплатформенные команды ввода-вывода и макросы: CMAIN - точка входа и CEXTERN для доступа к внешним функциям на языке C. 
Подробнее о ее командах Вы можете узнать здесь: <A HREF="http://asmcourse.cs.msu.ru/?page_id=169">http://asmcourse.cs.msu.ru/?page_id=169</A>.
</P>
<P>
&nbsp;
</P>
<H3>Немного об отладчике:</H3>
<P>
В качестве отладчика в SASM используется gdb. В дистрибутиве под Windows он
включен в сборку. В Linux Вы должны установить этот пакет.
</P>
<P>
Внимание! Перед отладкой проверьте – все ли функции формируют фреймы (mov ebp, esp). 
Это правило должно быть выполнено для всех функций, включая main.
</P>
<P>
Отладка программ с макросами из &quot;io.inc&quot; также поддерживается.
</P>
<P>
Для запуска отладки надо выбрать в меню &quot;Отладка&quot; одноименный пункт или нажать Ctrl+D - подсветится текущая строка. 
Теперь Вы можете выполнять необходимые действия по отладке (см. пункт &quot;Отладка&quot; в меню).
</P>
<P>
Вы можете поставить точку останова (breakpoint), нажимая на номер строки, на которой необходимо приостановить выполнение отлаживаемой программы.
<BR>
Команда &quot;Продолжить&quot; (F5) продолжает выполнение программы до точки останова или до конца.
<BR>
Команда &quot;Шаг с заходом&quot; (Shift+F7) переходит к следующей инструкции возможно с заходом в функции.
<BR>
Команда &quot;Шаг без захода&quot; (F7) переходит к следующей инструкции без захода в функции.
<BR>
Команда &quot;Показать регистры&quot; (Ctrl+R) открывает окно со значениями регистров процессора.
<BR>
Команда &quot;Показать память&quot; (Ctrl+M) открывает окно для просмотра переменных (watches) и памяти по произвольному адресу. 
Введя в нем имя переменной, адрес или произвольное выражение и указав размер (b - byte (1), w - word (2), d - double word (4), q - quad word (8)), 
в поле &quot;Значение&quot; Вы получите значение данного выражения. 
Также можно добавлять переменные из кода, нажав правой кнопкой на строке с переменной и выбрав &quot;Просмотреть&quot;.
В выражениях поддерживаются любые операторы языка C (*, &, +, -, *, /, %, !, >, &, |, &lt;&lt;, sizeof и др.), регистры нужно вводить с $ в начале (например, $eax). 
Если выражение является адресом следует установить соответствующую галочку справа. 
Формат вывода определяется в первом выпадающем меню (формат Smart пытается подобрать наиболее подходящий вид отображения).
Доступна возможность просмотра массивов - для отображения их содержимого в поле &quot;Размер массива&quot; укажите количество элементов в массиве.
Для удаления просмотра выражения нажмите на него правой кнопкой мыши и выберите &quot;Удалить&quot;.
В Windows при просмотре переменных из секции .rodata следует отображать их как адрес.
<BR>
Значения регистров и выражений из двух предыдущих команд обновляются при выполнении переходов на другую инструкцию в программе.
</P>
Также при запуске отладчика ниже лога появится поле &quot;Команда GDB&quot;. В него Вы можете вводить любые команды, поддерживаемые отладчиком gdb и выполнять 
их нажатием на соответствующую кнопку или Enter. Сами команды и результаты их выполнения будут выводиться в поле лога выше. 
Предыдущие введенные команды доступны по нажатию клавиш вверх/вниз. При нажатии кнопки &quot;Выполнить&quot; или Enter с пустой строкой 
будет выполнена последняя введенная команда. Результаты выполнения команд синхронизируются с отображением текущей строки в поле кода и 
состоянием окон, отображающих регистры и память. Доступна опция &quot;Вывести&quot; при включении которой результат введенного выражения сразу вводится (к команде 
добавляется &quot;p &quot;) (удобно для быстрого определения значения выражения (например, как калькулятор)). 
В выражениях поддерживаются любые операторы языка C (*, &, +, -, *, /, %, !, >, &, |, &lt;&lt;, sizeof и др.), регистры нужно вводить с $ в начале (например, $eax).
Например, чтобы посмотреть, что находиться на вершине стека, можно ввести выражение &quot;*((int *)$esp)&quot; с включенной галочкой &quot;Вывести&quot; или 
просто набрать команду &quot;p *((int *)$esp)&quot;.
<BR>
Чтобы присвоить переменной или регистру какое-то значение, надо перед присваиванием написать &quot;p &quot; или выполнять присваивание в режиме &quot;Вывести&quot;. 
Например, &quot;p $eax = 5&quot;.
<BR>
Вы можете набрать команду "help" для получения справки по командам gdb (на английском). Также хорошее руководство по gdb и принципам отладки в нем можно 
посмотреть здесь: <A HREF="http://www.opennet.ru/docs/RUS/gdb/">http://www.opennet.ru/docs/RUS/gdb/</A> (на русском).
<P>&nbsp;</P>
<H3>Реализация:</H3>
<H4>Windows</H4>
<P>В качестве компилятора для NASM используется nasm 2.10.05, запускаемый
под включенным в программу Cygwin'ом, в качестве компоновщика - gcc 4.6.2. Версии
компиляторов и компоновщиков подобраны с учетом рекомендуемых программ для курса &quot;Архитектура ЭВМ и язык 
ассемблера&quot; 1-го потока ВМК МГУ (<A HREF="http://asmcourse.cs.msu.ru/?page_id=169">http://asmcourse.cs.msu.ru/?page_id=169</A>). 
Также в программу включен отладчик gdb из пакета MinGW и немного измененная с учетом требований отладки библиотека макросов
ввода-вывода, команды которой можно посмотреть на сайте <A HREF="http://asmcourse.cs.msu.ru/?page_id=169">http://asmcourse.cs.msu.ru/?page_id=169</A>.
Под Windows SASM после установки сразу готов к работе.</P>
<H4>Linux</H4>
<P>
Внимание! Для работы программы на Linux на Вашем компьютере должны быть установлены:
</P>
<P STYLE="margin-left: 0.5in; text-indent: -0.25in">1)<SPAN STYLE="font-variant: normal">&nbsp;&nbsp;&nbsp;
nasm;</P>
<P STYLE="margin-left: 0.5in; text-indent: -0.25in">2)<SPAN STYLE="font-variant: normal">&nbsp;&nbsp;&nbsp;
gcc;</P>
<P STYLE="margin-left: 0.5in; text-indent: -0.25in">3)<SPAN STYLE="font-variant: normal">&nbsp;&nbsp;&nbsp;
gdb (для
отладки).</P>
<P>&nbsp;</P>
<H3>Предупреждения:</H3>
<P>
<B>
Внимание! Если у Вас что-то
работает не так, проверьте следующие пункты:
</B>
</P>
<P STYLE="margin-left: 0.5in; text-indent: -0.25in">1)<SPAN STYLE="font-variant: normal">&nbsp;&nbsp;&nbsp;
Так как в качестве компоновщика используется gcc, то точку входа в программу следует пометить глобальной меткой
_main (Windows) или main (Linux) или использовать библиотеку макросов &quot;io.inc&quot; с меткой CMAIN.
</P>
<P STYLE="margin-left: 0.5in; text-indent: -0.25in">2)<SPAN STYLE="font-variant: normal">&nbsp;&nbsp;&nbsp;
Перед отладкой проверьте – все ли функции формируют фреймы (mov ebp, esp). Это правило должно быть выполнено для всех функций, включая main. 
При невыполнении данного условия правильная работа отладчика не гарантирована.
</P>
<P>&nbsp;</P>
<P>
Пожелания и сообщения об ошибках отправляйте на адрес Dman1095@gmail.com
</P>
</BODY>
</HTML>
